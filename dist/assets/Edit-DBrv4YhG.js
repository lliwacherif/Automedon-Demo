import{d as J,r as x,w as R,e as r,o as d,j as v,g as e,v as p,l as j,F as q,m as A,k as l,h as o,a3 as se,a as B,a0 as oe,V as le,f as w,i as ne,C as Y,H as T,W as ie}from"./index-sk6FTrC8.js";import{u as re}from"./useReservations-B3m3NUV7.js";import{u as de}from"./useReservationDocuments-gTOLZjpK.js";import{u as ue}from"./useCars-BczHz-u5.js";import{a as I}from"./date-BpD5EXL9.js";import"./useFileUpload-CH-WYoKG.js";const ce={class:"flex space-x-2"},me=["required"],ve={class:"flex w-1/2 items-center gap-1"},pe=["value"],_e=["value"],G=J({__name:"DateTimeInput",props:{modelValue:{},required:{type:Boolean}},emits:["update:modelValue"],setup(N,{emit:n}){const k=N,S=n,F=Array.from({length:24},(m,u)=>String(u).padStart(2,"0")),$=["00","30"],_=x(""),g=x("09"),b=x("00");function L(){if(k.modelValue){const m=k.modelValue.split("T");if(m.length>=2){_.value=m[0];const u=m[1].split(":");u.length>=2&&(g.value=u[0],b.value=$.includes(u[1].substring(0,2))?u[1].substring(0,2):"00")}else m.length===1&&m[0]&&(_.value=m[0],g.value="09",b.value="00")}else _.value="",g.value="09",b.value="00"}return R(()=>k.modelValue,()=>{const m=_.value?`${_.value}T${g.value}:${b.value}`:"";k.modelValue&&(!m||!k.modelValue.startsWith(m))&&L()},{immediate:!0}),R([_,g,b],([m,u,c])=>{m&&u&&c?S("update:modelValue",`${m}T${u}:${c}`):S("update:modelValue","")}),(m,u)=>(d(),r("div",ce,[v(e("input",{"onUpdate:modelValue":u[0]||(u[0]=c=>_.value=c),type:"date",required:m.required,class:"block w-1/2 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"},null,8,me),[[p,_.value]]),e("div",ve,[v(e("select",{"onUpdate:modelValue":u[1]||(u[1]=c=>g.value=c),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-0 py-2 border text-center"},[(d(!0),r(q,null,A(l(F),c=>(d(),r("option",{key:c,value:c},o(c),9,pe))),128))],512),[[j,g.value]]),u[3]||(u[3]=e("span",{class:"text-gray-500 font-bold"},":",-1)),v(e("select",{"onUpdate:modelValue":u[2]||(u[2]=c=>b.value=c),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-0 py-2 border text-center"},[(d(),r(q,null,A($,c=>e("option",{key:c,value:c},o(c),9,_e)),64))],512),[[j,b.value]])])]))}}),ge={class:"max-w-4xl mx-auto p-6"},be={class:"mb-6"},fe={class:"text-2xl font-semibold text-gray-900"},xe={key:0,class:"text-sm text-gray-500 mt-1"},ye={key:0,class:"bg-white shadow-md rounded-lg p-6 text-center"},he={class:"mt-4 text-gray-500"},we={class:"border-b pb-4"},ke={class:"text-lg font-medium text-gray-900 mb-4"},Ve={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ue={class:"block text-sm font-medium text-gray-700 mb-1"},Ce={class:"block text-sm font-medium text-gray-700 mb-1"},De={class:"block text-sm font-medium text-gray-700 mb-1"},Se={class:"block text-sm font-medium text-gray-700 mb-1"},$e={class:"border-b pb-4"},Me={class:"text-lg font-medium text-gray-900 mb-4"},Te={class:"mb-4"},Re={class:"block text-sm font-medium text-gray-700 mb-1"},je=["disabled"],qe={value:0},Ae=["value"],Fe={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Le={class:"block text-sm font-medium text-gray-700 mb-1"},Pe={key:0,class:"mt-1 text-xs text-indigo-600 font-medium"},ze={class:"block text-sm font-medium text-gray-700 mb-1"},Be={key:0,class:"mt-1 text-xs text-indigo-600 font-medium"},Ie={class:"block text-sm font-medium text-gray-700 mb-1"},Ne={class:"text-xs text-gray-500 mt-1"},He={class:"border-b pb-4"},Oe={class:"text-lg font-medium text-gray-900 mb-4"},We={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ee={class:"block text-sm font-medium text-gray-700 mb-1"},Ye={class:"block text-sm font-medium text-gray-700 mb-1"},Ge={class:"text-xs text-gray-500 mt-1"},Je={class:"mt-4 pt-4 border-t border-gray-100"},Ke={class:"text-sm font-medium text-gray-900 mb-4"},Qe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Xe={class:"bg-indigo-50 p-3 rounded-md border border-indigo-100"},Ze={key:0,class:"text-xs text-green-700 mt-1 font-medium"},et={key:0,class:"border-b pb-4"},tt={class:"text-lg font-medium text-gray-900 mb-4"},at={class:"max-w-xs"},st={class:"block text-sm font-medium text-gray-700 mb-1"},ot={value:"pending"},lt={value:"confirmed"},nt={value:"active"},it={value:"completed"},rt={value:"cancelled"},dt={class:"mt-3 flex items-center space-x-2"},ut={key:1,class:"border-b pb-4"},ct={class:"mb-6"},mt={class:"flex items-center space-x-4"},vt={key:0,class:"animate-spin rounded-full h-5 w-5 border-b-2 border-indigo-600"},pt={key:0,class:"bg-gray-50 rounded-lg overflow-hidden border border-gray-200"},_t={class:"min-w-full divide-y divide-gray-200"},gt={class:"bg-white divide-y divide-gray-200"},bt={class:"px-6 py-4 whitespace-nowrap"},ft={class:"flex items-center"},xt={class:"flex-shrink-0 h-8 w-8 flex items-center justify-center bg-indigo-100 rounded-lg text-indigo-600"},yt={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ht={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},wt={class:"ml-4"},kt={class:"text-sm font-medium text-gray-900"},Vt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Ut={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-3"},Ct=["href"],Dt=["onClick"],St={key:1,class:"text-sm text-gray-500 italic"},$t={class:"text-lg font-medium text-gray-900 mb-4"},Mt={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},Tt={class:"block text-sm font-medium text-gray-700 mb-1"},Rt={class:"block text-sm font-medium text-gray-700 mb-1"},jt={class:"block text-sm font-medium text-gray-700 mb-1"},qt={class:"flex justify-end space-x-3 pt-4"},At=["disabled"],Ft={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},Lt={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},Pt={class:"p-6"},zt={key:0,class:"mb-4 border rounded-lg overflow-hidden"},Bt=["src"],It={key:1,class:"mb-4 p-6 bg-gray-50 rounded-lg text-center"},Nt={class:"text-sm font-medium text-gray-900"},Ht={class:"text-xs text-gray-500 mt-1"},Ot={class:"flex justify-end space-x-3"},Wt=["disabled"],Xt=J({__name:"Edit",setup(N){const{t:n}=se(),{getReservation:k,createReservation:S,updateReservation:F,checkAvailability:$}=re(),{documents:_,loading:g,fetchDocuments:b,uploadDocument:L,deleteDocument:m}=de(),{cars:u,fetchCars:c,updateCar:P}=ue(),y=oe(),H=ie(),f=B(()=>!!y.params.id&&y.params.id!=="new"),h=x(!1),M=x(!0),U=x(null),V=x(null),z=x(!1),t=x({client_name:"",client_cin:"",client_phone:"",client_email:"",start_date:"",end_date:"",duration_days:0,price_per_day:0,total_price:0,advance_payment:0,car_id:0,status:"confirmed",pickup_location:"",return_location:"",notes:""});function O(i){if(!i)return"";try{const a=new Date(i),s=a.getFullYear(),C=String(a.getMonth()+1).padStart(2,"0"),ee=String(a.getDate()).padStart(2,"0"),te=String(a.getHours()).padStart(2,"0"),ae=String(a.getMinutes()).padStart(2,"0");return`${s}-${C}-${ee}T${te}:${ae}`}catch{return""}}le(async()=>{if(await c(),f.value){const i=await k(Number(y.params.id));i&&(t.value={...i,start_date:O(i.start_date),end_date:O(i.end_date)},await b(Number(y.params.id)))}M.value=!1}),R([()=>t.value.start_date,()=>t.value.end_date],()=>{if(!M.value&&t.value.start_date&&t.value.end_date){const i=new Date(t.value.start_date),s=new Date(t.value.end_date).getTime()-i.getTime(),C=Math.ceil(s/(1e3*60*60*24));t.value.duration_days=C>0?C:0,W()}}),R([()=>t.value.price_per_day,()=>t.value.duration_days],()=>{M.value||W()});function W(){const i=t.value.duration_days||0,a=t.value.price_per_day||0;t.value.total_price=i*a}const D=B(()=>{const i=t.value.total_price||0,a=t.value.advance_payment||0;return Math.max(0,i-a)});async function K(){h.value=!0;try{if(!t.value.client_name||!t.value.client_cin||!t.value.client_phone||!t.value.car_id||!t.value.start_date||!t.value.end_date){alert(n("admin.reservations.validation_error")),h.value=!1;return}if((t.value.duration_days||0)<=0){alert(n("admin.reservations.invalid_dates")),h.value=!1;return}const i={client_name:t.value.client_name,client_cin:t.value.client_cin,client_phone:t.value.client_phone,client_email:t.value.client_email||null,car_id:t.value.car_id,start_date:new Date(t.value.start_date).toISOString(),end_date:new Date(t.value.end_date).toISOString(),duration_days:t.value.duration_days,price_per_day:t.value.price_per_day,total_price:t.value.total_price,advance_payment:t.value.advance_payment||0,status:t.value.status||"confirmed",pickup_location:t.value.pickup_location||null,return_location:t.value.return_location||null,notes:t.value.notes||null};if(!await $(t.value.car_id,i.start_date,i.end_date,f.value?Number(y.params.id):void 0)){alert(n("admin.reservations.error_dates_conflict")||"These dates conflict with another confirmed or active reservation."),h.value=!1;return}if(t.value.status==="active"&&new Date(t.value.start_date)>new Date){alert('⚠️ Impossible de mettre le statut sur "Actif" pour une réservation future. Veuillez utiliser "Confirmé".'),h.value=!1;return}if(f.value){await F(Number(y.params.id),i);const s=t.value.car_id||t.value.car?.id;s&&s>0&&(i.status==="active"?await P(s,{status:"loue"}):(i.status==="completed"||i.status==="cancelled")&&await P(s,{status:"disponible"}))}else{await S(i);const s=t.value.car_id||t.value.car?.id;s&&s>0&&i.status==="active"?await P(s,{status:"loue"}):alert(n("admin.reservations.saved_success"))}H.push("/admin/reservations")}catch(i){alert(n("admin.reservations.save_error")+": "+i.message)}finally{h.value=!1}}const Q=B(()=>u.value||[]);async function X(i){const a=i.target;if(a.files&&a.files[0]){const s=a.files[0];U.value=s,s.type.startsWith("image/")?V.value=URL.createObjectURL(s):V.value=null,z.value=!0,a.value=""}}async function Z(){if(U.value&&f.value&&y.params.id)try{await L(Number(y.params.id),U.value),E()}catch{alert(n("admin.reservations.upload_error"))}}function E(){V.value&&URL.revokeObjectURL(V.value),U.value=null,V.value=null,z.value=!1}return(i,a)=>(d(),r("div",ge,[e("div",be,[e("h1",fe,o(f.value?l(n)("admin.reservations.edit_title"):l(n)("admin.reservations.new_title")),1),f.value&&t.value.reservation_number?(d(),r("p",xe,o(t.value.reservation_number),1)):w("",!0)]),M.value?(d(),r("div",ye,[a[16]||(a[16]=e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto"},null,-1)),e("p",he,o(l(n)("common.loading"))+"...",1)])):(d(),r("form",{key:1,onSubmit:ne(K,["prevent"]),class:"bg-white shadow-md rounded-lg p-6 space-y-6"},[e("div",we,[e("h2",ke,o(l(n)("admin.reservations.client_info")),1),e("div",Ve,[e("div",null,[e("label",Ue,o(l(n)("admin.reservations.client_name"))+" * ",1),v(e("input",{"onUpdate:modelValue":a[0]||(a[0]=s=>t.value.client_name=s),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[p,t.value.client_name]])]),e("div",null,[e("label",Ce,o(l(n)("admin.reservations.client_cin"))+" * ",1),v(e("input",{"onUpdate:modelValue":a[1]||(a[1]=s=>t.value.client_cin=s),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[p,t.value.client_cin]])]),e("div",null,[e("label",De,o(l(n)("admin.reservations.client_phone"))+" * ",1),v(e("input",{"onUpdate:modelValue":a[2]||(a[2]=s=>t.value.client_phone=s),type:"tel",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[p,t.value.client_phone]])]),e("div",null,[e("label",Se,o(l(n)("admin.reservations.client_email")),1),v(e("input",{"onUpdate:modelValue":a[3]||(a[3]=s=>t.value.client_email=s),type:"email",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[p,t.value.client_email]])])])]),e("div",$e,[e("h2",Me,o(l(n)("admin.reservations.reservation_details")),1),e("div",Te,[e("label",Re,o(l(n)("admin.reservations.select_car"))+" * ",1),v(e("select",{"onUpdate:modelValue":a[4]||(a[4]=s=>t.value.car_id=s),required:"",disabled:f.value,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},[e("option",qe,o(l(n)("admin.reservations.choose_car")),1),(d(!0),r(q,null,A(Q.value,s=>(d(),r("option",{key:s.id,value:s.id},o(s.brand)+" "+o(s.model)+" - "+o(s.plate_number),9,Ae))),128))],8,je),[[j,t.value.car_id]])]),e("div",Fe,[e("div",null,[e("label",Le,o(l(n)("admin.reservations.start_date"))+" * ",1),Y(G,{modelValue:t.value.start_date,"onUpdate:modelValue":a[5]||(a[5]=s=>t.value.start_date=s),required:!0},null,8,["modelValue"]),t.value.start_date?(d(),r("p",Pe,o(l(I)(t.value.start_date)),1)):w("",!0)]),e("div",null,[e("label",ze,o(l(n)("admin.reservations.end_date"))+" * ",1),Y(G,{modelValue:t.value.end_date,"onUpdate:modelValue":a[6]||(a[6]=s=>t.value.end_date=s),required:!0},null,8,["modelValue"]),t.value.end_date?(d(),r("p",Be,o(l(I)(t.value.end_date)),1)):w("",!0)]),e("div",null,[e("label",Ie,o(l(n)("admin.reservations.duration")),1),v(e("input",{"onUpdate:modelValue":a[7]||(a[7]=s=>t.value.duration_days=s),type:"number",readonly:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"},null,512),[[p,t.value.duration_days]]),e("p",Ne,o(l(n)("admin.reservations.auto_calculated")),1)])])]),e("div",He,[e("h2",Oe,o(l(n)("admin.reservations.pricing")),1),e("div",We,[e("div",null,[e("label",Ee,o(l(n)("admin.reservations.price_per_day"))+" * (€) ",1),v(e("input",{"onUpdate:modelValue":a[8]||(a[8]=s=>t.value.price_per_day=s),type:"number",step:"0.01",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[p,t.value.price_per_day,void 0,{number:!0}]])]),e("div",null,[e("label",Ye,o(l(n)("admin.reservations.total_price"))+" (€) ",1),v(e("input",{"onUpdate:modelValue":a[9]||(a[9]=s=>t.value.total_price=s),type:"number",step:"0.01",readonly:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-lg font-semibold"},null,512),[[p,t.value.total_price]]),e("p",Ge,o(l(n)("admin.reservations.auto_calculated")),1)])]),e("div",Je,[e("h3",Ke,o(l(n)("admin.reservations.payment_details")||"Paiement"),1),e("div",Qe,[e("div",Xe,[a[17]||(a[17]=e("label",{class:"block text-sm font-medium text-indigo-900 mb-1"}," Acompte / Avance (€) ",-1)),v(e("input",{"onUpdate:modelValue":a[10]||(a[10]=s=>t.value.advance_payment=s),type:"number",step:"0.01",class:"w-full px-3 py-2 border border-indigo-200 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white",placeholder:"0.00"},null,512),[[p,t.value.advance_payment,void 0,{number:!0}]])]),e("div",{class:T(["p-3 rounded-md border",D.value>0?"bg-red-50 border-red-200":"bg-green-50 border-green-200"])},[e("label",{class:T(["block text-sm font-bold mb-1",D.value>0?"text-red-800":"text-green-800"])}," Reste à Payer (€) ",2),e("div",{class:T(["text-2xl font-bold",D.value>0?"text-red-600":"text-green-600"])},o(D.value.toFixed(2))+" € ",3),D.value===0?(d(),r("p",Ze,"✅ Payé en totalité")):w("",!0)],2)])])]),f.value?(d(),r("div",et,[e("h2",tt,o(l(n)("common.status")),1),e("div",at,[e("label",st,o(l(n)("admin.reservations.status_filter")),1),v(e("select",{"onUpdate:modelValue":a[11]||(a[11]=s=>t.value.status=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},[e("option",ot,o(l(n)("admin.reservations.status_pending")),1),e("option",lt,o(l(n)("admin.reservations.status_confirmed")),1),e("option",nt,o(l(n)("admin.reservations.status_active")),1),e("option",it,o(l(n)("admin.reservations.status_completed")),1),e("option",rt,o(l(n)("admin.reservations.status_cancelled")),1)],512),[[j,t.value.status]]),e("div",dt,[a[18]||(a[18]=e("span",{class:"text-sm text-gray-500"},"Statut actuel:",-1)),e("span",{class:T([{"bg-yellow-100 text-yellow-800":t.value.status==="pending","bg-blue-100 text-blue-800":t.value.status==="confirmed","bg-green-100 text-green-800":t.value.status==="active","bg-gray-100 text-gray-800":t.value.status==="completed","bg-red-100 text-red-800":t.value.status==="cancelled"},"px-3 py-1 text-sm font-semibold rounded-full capitalize"])},o(t.value.status),3)])])])):w("",!0),f.value?(d(),r("div",ut,[a[23]||(a[23]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Documents & Contrats",-1)),e("div",ct,[a[19]||(a[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Capturer / Téléverser Contrat ",-1)),e("div",mt,[e("input",{type:"file",accept:"image/*,application/pdf",capture:"environment",onChange:X,class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"},null,32),l(g)?(d(),r("div",vt)):w("",!0)])]),l(_).length>0?(d(),r("div",pt,[e("table",_t,[a[22]||(a[22]=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Fichier "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date d'ajout "),e("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",gt,[(d(!0),r(q,null,A(l(_),s=>(d(),r("tr",{key:s.id},[e("td",bt,[e("div",ft,[e("div",xt,[s.file_name.toLowerCase().endsWith(".pdf")?(d(),r("svg",yt,[...a[20]||(a[20]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)])])):(d(),r("svg",ht,[...a[21]||(a[21]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)])]))]),e("div",wt,[e("div",kt,o(s.file_name),1)])])]),e("td",Vt,o(l(I)(s.uploaded_at)),1),e("td",Ut,[e("a",{href:s.file_url,target:"_blank",class:"text-indigo-600 hover:text-indigo-900"}," Voir ",8,Ct),e("button",{onClick:C=>l(m)(s.id,s.file_url),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,Dt)])]))),128))])])])):(d(),r("div",St," Aucun document téléversé. "))])):w("",!0),e("div",null,[e("h2",$t,o(l(n)("admin.reservations.optional")),1),e("div",Mt,[e("div",null,[e("label",Tt,o(l(n)("admin.reservations.pickup_location")),1),v(e("input",{"onUpdate:modelValue":a[12]||(a[12]=s=>t.value.pickup_location=s),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[p,t.value.pickup_location]])]),e("div",null,[e("label",Rt,o(l(n)("admin.reservations.return_location")),1),v(e("input",{"onUpdate:modelValue":a[13]||(a[13]=s=>t.value.return_location=s),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[p,t.value.return_location]])])]),e("div",null,[e("label",jt,o(l(n)("admin.reservations.notes")),1),v(e("textarea",{"onUpdate:modelValue":a[14]||(a[14]=s=>t.value.notes=s),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[p,t.value.notes]])])]),e("div",qt,[e("button",{type:"button",onClick:a[15]||(a[15]=s=>l(H).push("/admin/reservations")),class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"},o(l(n)("common.cancel")),1),e("button",{type:"submit",disabled:h.value,class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50"},o(h.value?l(n)("common.saving"):l(n)("common.save")),9,At)])],32)),z.value?(d(),r("div",Ft,[e("div",Lt,[e("div",Pt,[a[25]||(a[25]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Aperçu du document",-1)),V.value?(d(),r("div",zt,[e("img",{src:V.value,alt:"Preview",class:"w-full h-auto"},null,8,Bt)])):(d(),r("div",It,[a[24]||(a[24]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 mx-auto text-indigo-600 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),e("p",Nt,o(U.value?.name),1),e("p",Ht,o(((U.value?.size||0)/1024/1024).toFixed(2))+" MB",1)])),e("div",Ot,[e("button",{onClick:E,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"}," Annuler "),e("button",{onClick:Z,disabled:l(g),class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50"},o(l(g)?"Téléversement...":"Confirmer"),9,Wt)])])])])):w("",!0)]))}});export{Xt as default};
