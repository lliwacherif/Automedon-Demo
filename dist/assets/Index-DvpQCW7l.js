import{u as C}from"./useCars-BVyuvBig.js";import{d as B,V as L,e as n,o as i,g as e,C as r,h as s,E as m,O as c,k as a,$ as p,F as h,m as g,H as y}from"./index-BLfBT3CA.js";import{S,T as V}from"./trash-2-Dc80UCQy.js";const j={class:"p-6"},T={class:"flex justify-between items-center mb-6"},q={class:"text-2xl font-semibold text-gray-900"},A={key:0,class:"text-center py-12"},D={key:1,class:"space-y-8"},E={class:"bg-gray-50 px-6 py-4 border-b border-gray-200"},F={class:"text-xl font-bold text-gray-900"},N={key:0,class:"px-6 py-8 text-center text-gray-500"},z={key:1},H={class:"hidden md:block overflow-x-auto"},I={class:"min-w-full divide-y divide-gray-200"},M={class:"bg-gray-50"},O={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},P={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},R={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},G={class:"bg-white divide-y divide-gray-200"},J={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},K={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono"},Q={class:"px-6 py-4 whitespace-nowrap"},U=["value","onChange","disabled"],W={value:"disponible"},X={value:"loue"},Y={value:"maintenance"},Z={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},ee=["onClick"],te={class:"md:hidden p-4 space-y-4"},se={class:"flex justify-between items-start mb-3"},oe={class:"text-sm font-bold text-gray-900"},ne={class:"text-xs text-gray-500 font-mono mt-1"},ie=["value","onChange","disabled"],ae={value:"disponible"},de={value:"loue"},le={value:"maintenance"},re={class:"flex justify-end space-x-3 pt-3 border-t border-gray-100"},ce=["onClick"],ge=B({__name:"Index",setup(ue){const{carsByBrand:b,loading:v,fetchCars:w,deleteCar:$,updateCar:k}=C();L(()=>{w()});async function _(o){confirm("Are you sure you want to delete this car?")&&await $(o)}async function x(o,d){await k(o,{status:d})}return(o,d)=>(i(),n("div",j,[e("div",T,[e("h1",q,s(o.$t("admin.fleet.title")),1),r(a(p),{to:"/admin/cars/create",class:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700"},{default:m(()=>[c(s(o.$t("admin.fleet.add_car")),1)]),_:1})]),a(v)?(i(),n("div",A,[...d[0]||(d[0]=[e("p",{class:"text-gray-500"},"Loading...",-1)])])):(i(),n("div",D,[(i(!0),n(h,null,g(a(b),(u,f)=>(i(),n("div",{key:f,class:"bg-white shadow rounded-lg overflow-hidden"},[e("div",E,[e("h2",F,s(f),1)]),u.length===0?(i(),n("div",N,s(o.$t("admin.fleet.no_cars")),1)):(i(),n("div",z,[e("div",H,[e("table",I,[e("thead",M,[e("tr",null,[e("th",O,s(o.$t("admin.fleet.model")),1),e("th",P,s(o.$t("admin.fleet.plate_number")),1),e("th",R,s(o.$t("admin.fleet.status")),1),d[1]||(d[1]=e("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ",-1))])]),e("tbody",G,[(i(!0),n(h,null,g(u,t=>(i(),n("tr",{key:t.id},[e("td",J,s(t.model),1),e("td",K,s(t.plate_number),1),e("td",Q,[e("select",{value:t.status,onChange:l=>x(t.id,l.target.value),disabled:t.status!=="maintenance",title:"Le statut ne peut être modifié manuellement que s'il est en maintenance.",class:y([{"bg-green-100 text-green-800":t.status==="disponible","bg-red-100 text-red-800":t.status==="loue","bg-yellow-100 text-yellow-800":t.status==="maintenance","opacity-50 cursor-not-allowed":t.status!=="maintenance"},"text-xs font-semibold rounded-md border-0 py-1 px-2 focus:ring-2 focus:ring-indigo-500"])},[e("option",W,s(o.$t("admin.fleet.disponible")),1),e("option",X,s(o.$t("admin.fleet.loue")),1),e("option",Y,s(o.$t("admin.fleet.maintenance")),1)],42,U)]),e("td",Z,[r(a(p),{to:`/admin/cars/${t.id}/edit`,class:"text-indigo-600 hover:text-indigo-900 mr-4"},{default:m(()=>[c(s(o.$t("admin.fleet.edit_car")),1)]),_:1},8,["to"]),e("button",{onClick:l=>_(t.id),class:"text-red-600 hover:text-red-900"},s(o.$t("admin.fleet.delete")),9,ee)])]))),128))])])]),e("div",te,[(i(!0),n(h,null,g(u,t=>(i(),n("div",{key:t.id,class:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm"},[e("div",se,[e("div",null,[e("h3",oe,s(t.model),1),e("p",ne,s(t.plate_number),1)]),e("select",{value:t.status,onChange:l=>x(t.id,l.target.value),disabled:t.status!=="maintenance",class:y([{"bg-green-100 text-green-800":t.status==="disponible","bg-red-100 text-red-800":t.status==="loue","bg-yellow-100 text-yellow-800":t.status==="maintenance","opacity-50 cursor-not-allowed":t.status!=="maintenance"},"text-xs font-semibold rounded-full border-0 py-1 px-2 focus:ring-2 focus:ring-indigo-500"])},[e("option",ae,s(o.$t("admin.fleet.disponible")),1),e("option",de,s(o.$t("admin.fleet.loue")),1),e("option",le,s(o.$t("admin.fleet.maintenance")),1)],42,ie)]),e("div",re,[r(a(p),{to:`/admin/cars/${t.id}/edit`,class:"flex items-center text-indigo-600 hover:text-indigo-900 text-sm font-medium"},{default:m(()=>[r(a(S),{class:"h-4 w-4 mr-1"}),c(" "+s(o.$t("admin.fleet.edit_car")),1)]),_:1},8,["to"]),e("button",{onClick:l=>_(t.id),class:"flex items-center text-red-600 hover:text-red-900 text-sm font-medium"},[r(a(V),{class:"h-4 w-4 mr-1"}),c(" "+s(o.$t("admin.fleet.delete")),1)],8,ce)])]))),128))])]))]))),128))]))]))}});export{ge as default};
