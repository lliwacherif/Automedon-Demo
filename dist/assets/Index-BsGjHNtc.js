import{c as j,d as B,a3 as L,r as b,V as z,e as n,o as i,g as t,C as l,h as s,k as e,E as w,O as k,$ as C,j as H,v as E,l as N,f as g,F as _,m as v,H as M,i as S,G as q}from"./index-sk6FTrC8.js";import{u as U}from"./useReservations-B3m3NUV7.js";import{u as A}from"./useReservationDocuments-gTOLZjpK.js";import{a as x}from"./date-BpD5EXL9.js";import{C as G}from"./car-CH83aHsN.js";import{S as O,T as P}from"./trash-2-Dt9hxhpx.js";import{E as W}from"./eye-CCQqhLF1.js";import"./useFileUpload-CH-WYoKG.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=j("DownloadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=j("FileTextIcon",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=j("UserIcon",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Q={class:"p-6"},X={class:"flex justify-between items-center mb-6"},Y={class:"text-2xl font-semibold text-gray-900"},tt={class:"bg-white p-4 rounded-lg shadow mb-6"},et={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},st={class:"block text-sm font-medium text-gray-700 mb-1"},ot=["placeholder"],at={class:"block text-sm font-medium text-gray-700 mb-1"},nt={value:"all"},it={value:"pending"},dt={value:"confirmed"},rt={value:"active"},lt={value:"completed"},ct={value:"cancelled"},ut={key:0,class:"text-center py-12"},xt={class:"text-gray-500"},_t={key:1},pt={class:"hidden md:block bg-white shadow overflow-hidden sm:rounded-lg"},mt={class:"min-w-full divide-y divide-gray-200"},ht={class:"bg-gray-50"},gt={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},vt={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},yt={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},ft={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},bt={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},wt={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},kt={scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},Ct={class:"bg-white divide-y divide-gray-200"},Mt={key:0},jt={colspan:"8",class:"px-6 py-4 text-center text-gray-500"},Dt=["onClick"],Vt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-indigo-600"},$t={class:"px-6 py-4 whitespace-nowrap"},Ht={class:"text-sm font-medium text-gray-900"},Tt={class:"text-sm text-gray-500"},Ft={class:"px-6 py-4 whitespace-nowrap"},It={class:"text-sm font-medium text-gray-900"},Rt={class:"text-sm text-gray-500"},Bt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Lt={class:"text-xs text-gray-400"},zt={class:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900"},Et={class:"px-6 py-4 whitespace-nowrap"},Nt={class:"px-6 py-4 whitespace-nowrap text-center"},St={class:"text-indigo-600 hover:text-indigo-900 flex items-center justify-center mx-auto"},qt=["onClick"],Ut={key:0},At={colspan:"8",class:"px-6 py-4 bg-gray-50"},Gt={class:"max-w-4xl"},Ot={key:0,class:"space-y-2"},Pt={class:"flex items-center space-x-3"},Wt={class:"flex-shrink-0 h-10 w-10 flex items-center justify-center bg-indigo-100 rounded-lg text-indigo-600"},Zt={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Jt={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Kt={class:"text-sm font-medium text-gray-900"},Qt={class:"text-xs text-gray-500"},Xt={class:"flex space-x-2"},Yt=["href"],te=["href"],ee={key:1,class:"text-sm text-gray-500 italic py-2"},se={class:"md:hidden space-y-4"},oe={key:0,class:"text-center py-12 bg-white rounded-lg shadow"},ae={class:"text-gray-500"},ne={class:"flex justify-between items-start"},ie={class:"text-sm font-bold text-indigo-600"},de={class:"text-xs text-gray-500 mt-1"},re={class:"flex items-center space-x-3 pt-2 border-t border-gray-100"},le={class:"text-sm font-medium text-gray-900"},ce={class:"text-xs text-gray-500"},ue={class:"flex items-center space-x-3"},xe={class:"text-sm font-medium text-gray-900"},_e={class:"text-xs text-gray-500"},pe={class:"flex items-center space-x-3"},me={class:"text-sm text-gray-600"},he={class:"text-xs text-gray-400"},ge={class:"flex justify-between items-center pt-2 border-t border-gray-100"},ve={class:"text-sm font-bold text-gray-900"},ye={class:"flex space-x-2"},fe=["onClick"],be=["onClick"],we={key:0,class:"mt-3 pt-3 border-t border-gray-100 bg-gray-50 rounded-md p-3"},ke={key:0,class:"space-y-2"},Ce={class:"text-xs font-medium text-gray-700 truncate max-w-[150px]"},Me={class:"flex space-x-1"},je=["href"],De=["href"],Ve={key:1,class:"text-xs text-gray-500 italic text-center py-1"},Ee=B({__name:"Index",setup($e){const{t:a}=L(),{reservations:p,loading:T,fetchReservations:F,deleteReservation:I}=U(),{documents:m,fetchDocuments:R}=A(),y=b(""),f=b("all"),u=b(null);z(()=>{h()});async function h(){await F(1,y.value,f.value)}function D(c){switch(c){case"pending":return"bg-yellow-100 text-yellow-800";case"confirmed":return"bg-blue-100 text-blue-800";case"active":return"bg-green-100 text-green-800";case"completed":return"bg-gray-100 text-gray-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}async function V(c,d){confirm(a("admin.reservations.confirm_delete",{number:d}))&&(await I(c),h())}async function $(c){u.value===c?u.value=null:(u.value=c,await R(c))}return(c,d)=>(i(),n("div",Q,[t("div",X,[t("h1",Y,s(e(a)("admin.reservations.title")),1),l(e(C),{to:"/admin/reservations/new",class:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700"},{default:w(()=>[k(s(e(a)("admin.reservations.new_reservation")),1)]),_:1})]),t("div",tt,[t("div",et,[t("div",null,[t("label",st,s(e(a)("admin.reservations.search")),1),H(t("input",{"onUpdate:modelValue":d[0]||(d[0]=o=>y.value=o),onInput:h,type:"text",placeholder:e(a)("admin.reservations.search_placeholder"),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,40,ot),[[E,y.value]])]),t("div",null,[t("label",at,s(e(a)("admin.reservations.status_filter")),1),H(t("select",{"onUpdate:modelValue":d[1]||(d[1]=o=>f.value=o),onChange:h,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},[t("option",nt,s(e(a)("admin.reservations.all_statuses")),1),t("option",it,s(e(a)("admin.reservations.status_pending")),1),t("option",dt,s(e(a)("admin.reservations.status_confirmed")),1),t("option",rt,s(e(a)("admin.reservations.status_active")),1),t("option",lt,s(e(a)("admin.reservations.status_completed")),1),t("option",ct,s(e(a)("admin.reservations.status_cancelled")),1)],544),[[N,f.value]])])])]),e(T)?(i(),n("div",ut,[t("p",xt,s(e(a)("common.loading"))+"...",1)])):(i(),n("div",_t,[t("div",pt,[t("table",mt,[t("thead",ht,[t("tr",null,[t("th",gt,s(e(a)("admin.reservations.reservation_number")),1),t("th",vt,s(e(a)("admin.reservations.client")),1),t("th",yt,s(e(a)("admin.reservations.car")),1),t("th",ft,s(e(a)("admin.reservations.dates")),1),t("th",bt,s(e(a)("admin.reservations.total")),1),t("th",wt,s(e(a)("common.status")),1),d[3]||(d[3]=t("th",{scope:"col",class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"}," Documents ",-1)),t("th",kt,s(e(a)("common.actions")),1)])]),t("tbody",Ct,[e(p).length===0?(i(),n("tr",Mt,[t("td",jt,s(e(a)("admin.reservations.no_reservations")),1)])):g("",!0),(i(!0),n(_,null,v(e(p),o=>(i(),n(_,{key:o.id},[t("tr",{class:"hover:bg-gray-50 cursor-pointer",onClick:r=>$(o.id)},[t("td",Vt,s(o.reservation_number),1),t("td",$t,[t("div",Ht,s(o.client_name),1),t("div",Tt,s(o.client_cin),1)]),t("td",Ft,[t("div",It,s(o.car?.brand)+" "+s(o.car?.model),1),t("div",Rt,s(o.car?.plate_number),1)]),t("td",Bt,[t("div",null,s(e(x)(o.start_date)),1),t("div",null,s(e(x)(o.end_date)),1),t("div",Lt,"("+s(o.duration_days)+" "+s(e(a)("admin.reservations.days"))+")",1)]),t("td",zt," $"+s(o.total_price.toFixed(2)),1),t("td",Et,[t("span",{class:M([D(o.status),"px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])},s(e(a)(`admin.reservations.status_${o.status}`)),3)]),t("td",Nt,[t("button",St,[(i(),n("svg",{xmlns:"http://www.w3.org/2000/svg",class:M(["h-5 w-5",{"rotate-180":u.value===o.id}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...d[4]||(d[4]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))])]),t("td",{class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",onClick:d[2]||(d[2]=S(()=>{},["stop"]))},[l(e(C),{to:`/admin/reservations/${o.id}`,class:"text-indigo-600 hover:text-indigo-900"},{default:w(()=>[k(s(e(a)("common.edit")),1)]),_:1},8,["to"]),t("button",{onClick:r=>V(o.id,o.reservation_number),class:"text-red-600 hover:text-red-900"},s(e(a)("common.delete")),9,qt)])],8,Dt),u.value===o.id?(i(),n("tr",Ut,[t("td",At,[t("div",Gt,[d[7]||(d[7]=t("h4",{class:"text-sm font-semibold text-gray-900 mb-3"},"Documents du Contrat",-1)),e(m).length>0?(i(),n("div",Ot,[(i(!0),n(_,null,v(e(m),r=>(i(),n("div",{key:r.id,class:"flex items-center justify-between bg-white p-3 rounded-lg border border-gray-200"},[t("div",Pt,[t("div",Wt,[r.file_name.toLowerCase().endsWith(".pdf")?(i(),n("svg",Zt,[...d[5]||(d[5]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)])])):(i(),n("svg",Jt,[...d[6]||(d[6]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)])]))]),t("div",null,[t("div",Kt,s(r.file_name),1),t("div",Qt,"Ajouté le "+s(e(x)(r.uploaded_at)),1)])]),t("div",Xt,[t("a",{href:r.file_url,target:"_blank",download:"",class:"px-3 py-1 text-xs bg-indigo-50 text-indigo-700 rounded-md hover:bg-indigo-100"}," Télécharger ",8,Yt),t("a",{href:r.file_url,target:"_blank",class:"px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200"}," Voir ",8,te)])]))),128))])):(i(),n("div",ee," Aucun document disponible. "))])])])):g("",!0)],64))),128))])])]),t("div",se,[e(p).length===0?(i(),n("div",oe,[t("p",ae,s(e(a)("admin.reservations.no_reservations")),1)])):g("",!0),(i(!0),n(_,null,v(e(p),o=>(i(),n("div",{key:o.id,class:"bg-white rounded-lg shadow p-4 space-y-3"},[t("div",ne,[t("div",null,[t("span",ie,"#"+s(o.reservation_number),1),t("div",de,s(e(x)(o.created_at)),1)]),t("span",{class:M([D(o.status),"px-2 py-1 text-xs font-semibold rounded-full"])},s(e(a)(`admin.reservations.status_${o.status}`)),3)]),t("div",re,[l(e(K),{class:"h-4 w-4 text-gray-400"}),t("div",null,[t("div",le,s(o.client_name),1),t("div",ce,s(o.client_phone),1)])]),t("div",ue,[l(e(G),{class:"h-4 w-4 text-gray-400"}),t("div",null,[t("div",xe,s(o.car?.brand)+" "+s(o.car?.model),1),t("div",_e,s(o.car?.plate_number),1)])]),t("div",pe,[l(e(q),{class:"h-4 w-4 text-gray-400"}),t("div",me,[k(s(e(x)(o.start_date))+" - "+s(e(x)(o.end_date))+" ",1),t("span",he,"("+s(o.duration_days)+"j)",1)])]),t("div",ge,[t("div",ve,s(o.total_price.toFixed(2))+" TND ",1),t("div",ye,[t("button",{onClick:r=>$(o.id),class:"p-2 text-gray-400 hover:text-indigo-600 rounded-full hover:bg-gray-100"},[l(e(J),{class:"h-4 w-4"})],8,fe),l(e(C),{to:`/admin/reservations/${o.id}`,class:"p-2 text-blue-600 hover:text-blue-800 rounded-full hover:bg-blue-50"},{default:w(()=>[l(e(O),{class:"h-4 w-4"})]),_:1},8,["to"]),t("button",{onClick:r=>V(o.id,o.reservation_number),class:"p-2 text-red-600 hover:text-red-800 rounded-full hover:bg-red-50"},[l(e(P),{class:"h-4 w-4"})],8,be)])]),u.value===o.id?(i(),n("div",we,[d[8]||(d[8]=t("h4",{class:"text-xs font-semibold text-gray-700 mb-2 uppercase tracking-wider"},"Documents",-1)),e(m).length>0?(i(),n("div",ke,[(i(!0),n(_,null,v(e(m),r=>(i(),n("div",{key:r.id,class:"flex items-center justify-between bg-white p-2 rounded border border-gray-200"},[t("span",Ce,s(r.file_name),1),t("div",Me,[t("a",{href:r.file_url,target:"_blank",download:"",class:"p-1 text-indigo-600 hover:bg-indigo-50 rounded"},[l(e(Z),{class:"h-3 w-3"})],8,je),t("a",{href:r.file_url,target:"_blank",class:"p-1 text-gray-600 hover:bg-gray-50 rounded"},[l(e(W),{class:"h-3 w-3"})],8,De)])]))),128))])):(i(),n("div",Ve," Aucun document. "))])):g("",!0)]))),128))])]))]))}});export{Ee as default};
